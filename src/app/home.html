<section id="home" class="home-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2">
        <div class="section-heading text-center">
          <div>
            <h2>Seattle 911 Calls</h2>
          </div>
          <p>Reported Seattle 911 Calls for past {{days}} days</p>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-8" style="min-width:700px">
        <h3 class="text-center">Calls per day</h3>
        <div id="chart" style="position: relative; height:400px; width:700px">
          <canvas baseChart id="baseChart" #baseChart width="700" height="400" [datasets]="lineChartData" [labels]="lineChartLabels"
            [options]="lineChartOptions" [colors]="lineChartColors" [legend]="lineChartLegend" [chartType]="lineChartType"
            (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
          </canvas>
        </div>
      </div>
      <div class="col-md-4" style="margin-bottom: 10px">
        <h3 style="margin: 10px 0px;">Quick access ranges</h3>
        <div>
          <button (click)="getData(7)">Last 7 days</button>
          <button (click)="getData(30)">Last 30 days</button>
          <button (click)="getData(90)">Last 90 days</button>
        </div>

        <h3 style="margin: 10px 0px;">Custom range</h3>
        <div>
          <form [formGroup]="rangeFormModel" (ngSubmit)="onDatepickerFormSubmit()" novalidate>
            <div [formGroup]="rangeForm">
              <div class="form-group">
                <label class="col-xs-4 control-label" for="startdate">Start Date:</label>
                <div class="col-xs-8">
                  <my-date-picker name="startdate" [options]="myDatePickerOptions" formControlName="startdate"></my-date-picker>
                  <div class="alert alert-danger" *ngIf="rangeForm.controls.startdate.errors?.required">Start Date is required!</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label" for="enddate">End Date:</label>
                <div class="col-xs-8">
                  <my-date-picker name="enddate" [options]="myDatePickerOptions" formControlName="enddate"></my-date-picker>
                  <div class="alert alert-danger" *ngIf="rangeForm.controls.enddate.errors?.required">End Date is required!</div>
                  <div class="alert alert-danger" *ngIf="rangeForm.errors?.badRange">End Date must be after Start Date!</div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="col-xs-12 text-center">
                <button type="submit" class="btn btn-default" [disabled]="!rangeFormModel.valid" >Query</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="row">&nbsp;</div>
    <div class="row">
      <div class="col-md-8">
        <h3 class="text-center">Breakdown by type</h3>
        <div id="pieChartContainer" style="position: relative; height:400px; width:700px">
          <canvas baseChart id="pieChart" #pieChart width="700" height="400" [data]="pieChartData" [labels]="pieChartLabels" [options]="pieChartOptions"
            [colors]="pieChartColors" [chartType]="pieChartType" (chartHover)="chartPieHovered($event)" (chartClick)="chartPieClicked($event)">>
          </canvas>
        </div>
      </div>
      <div class="col-md-4" style="margin-bottom: 10px">

      </div>
    </div>
  </div>
</section>